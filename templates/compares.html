<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ტელეფონების სპეციფიკაციების ბაზა</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='compares.css') }}">
    <style>
        body {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            color: #e2e8f0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mode-switcher {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .mode-btn {
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid #3b82f6;
            background-color: transparent;
            color: #3b82f6;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        
        .mode-btn:hover {
            background-color: #3b82f6;
            color: white;
        }
        
        .mode-btn.active {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        .mode-btn i {
            margin-right: 8px;
        }
        
        #mainContent {
            background-color: rgba(30, 41, 59, 0.8);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <!-- რეჟიმები -->
        <div class="mode-switcher mb-4">
            <button id="singleModeBtn" class="btn mode-btn">
                <i class="fas fa-mobile-alt"></i>მარტოხელა
            </button>
            <button id="compareModeBtn" class="btn mode-btn">
                <i class="fas fa-exchange-alt"></i>შედარება
            </button>
        </div>

        <div id="mainContent" style="display: none;">
            <!-- ტელეფონების არჩევა შედარების რეჟიმში -->
            <div id="compareSelection" class="compare-selection mb-4" style="display: none;">
                <div class="phone-selectors-container">
                    <div class="phone-selector">
                        <div class="selector-header">
                            <h4>ტელეფონი 1</h4>
                        </div>
                        <div class="phone-preview" id="phonePreview1">
                            <div class="placeholder">
                                <i class="fas fa-plus"></i>
                                <p>აირჩიეთ ტელეფონი</p>
                            </div>
                        </div>
                        <button class="btn btn-outline-secondary mt-2 select-phone-btn" data-phone="1">
                            ტელეფონის არჩევა
                        </button>
                    </div>
                    <div class="phone-selector">
                        <div class="selector-header">
                            <h4>ტელეფონი 2</h4>
                        </div>
                        <div class="phone-preview" id="phonePreview2">
                            <div class="placeholder">
                                <i class="fas fa-plus"></i>
                                <p>აირჩიეთ ტელეფონი</p>
                            </div>
                        </div>
                        <button class="btn btn-outline-secondary mt-2 select-phone-btn" data-phone="2">
                            ტელეფონის არჩევა
                        </button>
                    </div>
                </div>
                <div class="compare-controls">
                    <button id="startCompareBtn" class="btn btn-success" disabled>
                        <i class="fas fa-balance-scale me-2"></i>შედარება
                    </button>
                    <button id="clearCompareBtn" class="btn btn-outline-danger">
                        <i class="fas fa-times me-2"></i>გასუფთავება
                    </button>
                </div>
            </div>

            <div id="searchResults" class="specs-container mt-5" style="display: none;">
                <div class="search-results-header">
                    <div class="search-box">
                        <div class="input-group">
                            <input type="text" id="phoneSearch" class="form-control" 
                                   placeholder="შეიყვანეთ ბრენდი ან მოდელი...">
                        </div>
                    </div>
                </div>
                <div class="phone-grid">
                    <!-- ძიების შედეგები აქ გამოჩნდება -->
                </div>
            </div>

            <div id="phoneDetails" class="specs-container mt-5" style="display: none;">
                <button id="backToResults" class="btn btn-secondary mb-4">
                    <i class="fas fa-arrow-left me-2"></i>უკან შედეგებთან
                </button>
                
                <div class="specs-header">
                    <div class="specs-phone">
                        <img id="phoneImage" src="" alt="Phone" class="phone-thumb">
                        <div id="phoneTitle" class="mt-3 h3 text-center"></div>
                    </div>
                </div>
                
                <div class="spec-items mt-4" id="specsContainer">
                    <!-- სპეციფიკაციები აქ გამოჩნდება -->
                </div>
            </div>

            <!-- შედარების კონტეინერი -->
            <div id="compareDetails" class="compare-container mt-5" style="display: none;">
                <button id="backFromCompare" class="btn btn-secondary mb-4">
                    <i class="fas fa-arrow-left me-2"></i>უკან არჩევანზე
                </button>
                
                <div class="compare-header">
                    <div class="compare-phone">
                        <img id="compareImage1" src="" alt="Phone 1" class="phone-thumb">
                        <div id="compareTitle1" class="mt-3 h4 text-center"></div>
                    </div>
                    <div class="vs-badge">
                        <span>VS</span>
                    </div>
                    <div class="compare-phone">
                        <img id="compareImage2" src="" alt="Phone 2" class="phone-thumb">
                        <div id="compareTitle2" class="mt-3 h4 text-center"></div>
                    </div>
                </div>
                
                <!-- შედარების შედეგები -->
                <div id="comparisonResults"></div>
                
                <!-- სპეციფიკაციების კონტეინერი -->
                <div class="compare-specs-grid" id="compareSpecs">
                    <!-- სპეციფიკაციები შედარებისთვის აქ გამოჩნდება -->
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log("Document loaded - initializing");
        
        // Основные элементы интерфейса
        const mainContent = document.getElementById('mainContent');
        const singleModeBtn = document.getElementById('singleModeBtn');
        const compareModeBtn = document.getElementById('compareModeBtn');
        const compareSelection = document.getElementById('compareSelection');
        const searchResults = document.getElementById('searchResults');
        
        // Проверка существования критически важных элементов
        if (!mainContent) console.error("Main content element not found");
        if (!singleModeBtn) console.error("Single mode button not found");
        if (!compareModeBtn) console.error("Compare mode button not found");
        
        // Текущий режим
        let currentMode = null;
        
        // Функции управления режимами
        function resetMode() {
            console.log("Resetting mode");
            currentMode = null;
            
            // Сброс активных кнопок
            if (singleModeBtn) singleModeBtn.classList.remove('active');
            if (compareModeBtn) compareModeBtn.classList.remove('active');
            
            // Скрытие основного контента
            if (mainContent) mainContent.style.display = 'none';
            
            // Скрытие всех разделов
            if (compareSelection) compareSelection.style.display = 'none';
            if (searchResults) searchResults.style.display = 'none';
        }
        
        function setActiveMode(mode) {
            console.log(`Setting active mode: ${mode}`);
            currentMode = mode;
            
            // Обновление кнопок
            if (singleModeBtn) {
                singleModeBtn.classList.toggle('active', mode === 'single');
            }
            if (compareModeBtn) {
                compareModeBtn.classList.toggle('active', mode === 'compare');
            }
            
            // Показываем основной контент
            if (mainContent) {
                mainContent.style.display = 'block';
            }
            
            // Показываем соответствующий раздел
            if (mode === 'single') {
                // Одиночный режим
                if (compareSelection) compareSelection.style.display = 'none';
                if (searchResults) searchResults.style.display = 'block';
                console.log("Single mode activated");
            } 
            else if (mode === 'compare') {
                // Режим сравнения
                if (searchResults) searchResults.style.display = 'none';
                if (compareSelection) compareSelection.style.display = 'block';
                console.log("Compare mode activated");
            }
        }
        
        // Обработчики событий для кнопок режимов
        if (singleModeBtn) {
            singleModeBtn.addEventListener('click', function() {
                console.log("Single mode button clicked");
                if (currentMode === 'single') {
                    resetMode();
                } else {
                    setActiveMode('single');
                }
            });
        }
        
        if (compareModeBtn) {
            compareModeBtn.addEventListener('click', function() {
                console.log("Compare mode button clicked");
                if (currentMode === 'compare') {
                    resetMode();
                } else {
                    setActiveMode('compare');
                }
            });
        }

        // Дополнительные переменные
        const phoneDetails = document.getElementById('phoneDetails');
        const compareDetails = document.getElementById('compareDetails');
        const phoneSearch = document.getElementById('phoneSearch');
        const phoneTitle = document.getElementById('phoneTitle');
        const phoneImage = document.getElementById('phoneImage');
        const specsContainer = document.getElementById('specsContainer');
        const backToResults = document.getElementById('backToResults');
        const startCompareBtn = document.getElementById('startCompareBtn');
        const clearCompareBtn = document.getElementById('clearCompareBtn');
        const selectPhoneBtns = document.querySelectorAll('.select-phone-btn');
        const backFromCompare = document.getElementById('backFromCompare');
        const compareTitle1 = document.getElementById('compareTitle1');
        const compareTitle2 = document.getElementById('compareTitle2');
        const compareImage1 = document.getElementById('compareImage1');
        const compareImage2 = document.getElementById('compareImage2');
        const compareSpecsContainer = document.getElementById('compareSpecs');
        const comparisonResults = document.getElementById('comparisonResults');
        
        // ტელეფონის პრევიუ ელემენტები
        const phonePreviews = {
            1: document.getElementById('phonePreview1'),
            2: document.getElementById('phonePreview2')
        };
        
        // შედარებისთვის შერჩეული ტელეფონები
        let selectedPhones = {
            1: null,
            2: null
        };
        
        // მახასიათებელთა ჯგუფები
        const specGroups = {
            "ძირითადი": [
                "გამოშვების წელი", "ოპერაციული სისტემა", "OS ვერსია", "OS გარსაცმი", "განახლების პოლიტიკა",
                "უკანასკნელი უსაფრთხოების განახლება"
            ],
            "ეკრანი": [
                "ეკრანის ზომა (დუიმი)", "ეკრანის გაფართოება", "ეკრანის ტიპი", 
                "განახლების სიხშირე (ჰც)", "მაქსიმალური სიკაშკაშე (ნიტი)", "HDR მხარდაჭერა",
                "დამცავი მინა", "ეკრანი/კორპუსის თანაფარდობა", "პიქსელების სიმჭიდროვე (PPI)"
            ],
            "პროცესორი": [
                "პროცესორი", "CPU არქიტექტურა", "GPU", "GPU არქიტექტურა", "NPU", "ISP", "მოდემი",
                "ოპერატიული მეხსიერება (GB)", "ოპერატიული მეხსიერების ტიპი", "ოპერატიული მეხსიერების სიხშირე (მჰც)", "მუდმივი მეხსიერება (GB)", "მუდმივი მეხსიერების ტიპი", "მუდმივი მეხსიერების სიჩქარე",
                "გაგრილების სისტემა", "გაგრილების ფართობი (მმ²)", "AnTuTu შეფასება", 
                "Geekbench (ერთი ბირთვი)", "Geekbench (მრავალი ბირთვი)"
            ],
            "კამერა": [
                "მთავარი კამერა (MP)", "ულტრაფართო კამერა (MP)", "ტელე კამერა 1 (MP)", 
                "ტელე კამერა 2 (MP)", "წინა კამერა (MP)", "სენსორის ზომა (მთავარი)", 
                "პიქსელის ზომა (მთავარი)", "ზუმის შესაძლებლობები", "ვიდეო ჩაწერა", "ნელი მოძრაობა",
                "კამერის ფუნქციები"
            ],
            "ბატარეა": [
                "ბატარეის სიმძლავრე (mAh)", "ბატარეის ტიპი", "სწრაფი დატენვა",
                "უსადენო დატენვა", "უკუსადენო დატენვა", "დატენვის ინტერფეისი", "მუშაობის დრო (სთ)",
                "მოსვენების რეჟიმში მოხმარება", "მაქსიმალური სიმძლავრე"
            ],
            "კორპუსი": [
                "წონა (გ)", "ზომები (მმ)", "კორპუსის მასალა", "წყალდაცვა", "მტვრედაცვა",
                "დაცვის სერტიფიკატი", "ჩარჩოს მასალა", "უკანა პანელის მასალა", "ფერები"
            ],
            "კავშირი": [
                "5G მხარდაჭერა", "5G დიაპაზონები", "mmWave მხარდაჭერა", "SIM სლოტები", "SIM ბარათის ტიპი", 
                "Wi-Fi", "Wi-Fi მახასიათებლები", "Bluetooth", "Bluetooth კოდეკები", "NFC", "ინფრაწითელი პორტი", 
                "USB ვერსია", "GPS", "სატელიტური კავშირი"
            ],
            "აუდიო": [
                "დინამიკები", "აუდიო კონფიგურაცია", "მიკროფონები", "აუდიოგამოსასვლელი", "სივრცული ხმა"
            ],
            "უსაფრთხოება": [
                "თითის ანაბეჭდის სკანერი", "სახით განბლოკვა", "აქსელერომეტრი", "გიროსკოპი", 
                "სიახლოვის სენსორი", "კომპასი", "ბარომეტრი", "განათების სენსორი", "ჰოლის სენსორი", 
                "LiDAR", "თერმომეტრი", "SpO2 სენსორი"
            ],
            "დამატებითი": [
                "სტილუსის მხარდაჭერა", "სტილუსის ტიპი", "სამუშაო მაგიდის რეჟიმი", "VR მხარდაჭერა", 
                "AI ფუნქციები", "თამაშის ფუნქციები", "უსაფრთხოების ჩიპი"
            ],
            "კომპლექტაცია": [
                "დამტენი კომპლექტში", "კაბელის ტიპი", "ადაპტერი კომპლექტში", 
                "ყურსასმენები კომპლექტში", "ქავერი კომპლექტში"
            ],
            "ეკოლოგია": [
                "გადამუშავებული მასალები", "შეფუთვა", "ეკოსერტიფიკატები", "რემონტის ინდექსი",
                "ბატარეის ციკლები"
            ],
            "ფასი": [
                "საწყისი ფასი (₾)", "მიმდინარე ფასი (₾)", "ხელმისაწვდომობა", "გარანტია (თვე)"
            ]
        };
        
        // Обработчики для кнопок выбора телефонов
        if (selectPhoneBtns) {
            selectPhoneBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const phoneNum = parseInt(this.getAttribute('data-phone'));
                    openPhoneSelection(phoneNum);
                });
            });
        }
        
        function openPhoneSelection(phoneNum) {
            console.log(`Opening phone selection for phone ${phoneNum}`);
            // Здесь будет логика открытия выбора телефона
        }
        
        // Обработчик для кнопки сравнения
        if (startCompareBtn) {
            startCompareBtn.addEventListener('click', function() {
                console.log("Start comparison clicked");
                // Здесь будет логика начала сравнения
            });
        }
        
        // Обработчик для кнопки очистки
        if (clearCompareBtn) {
            clearCompareBtn.addEventListener('click', function() {
                console.log("Clear comparison clicked");
                // Здесь будет логика очистки выбора
            });
        }
        
        // Обработчик для кнопки назад
        if (backToResults) {
            backToResults.addEventListener('click', function() {
                console.log("Back to results clicked");
                if (phoneDetails) phoneDetails.style.display = 'none';
                if (currentMode === 'single') {
                    if (searchResults) searchResults.style.display = 'block';
                } else {
                    if (compareSelection) compareSelection.style.display = 'block';
                }
            });
        }
        
        // Обработчик для кнопки назад из сравнения
        if (backFromCompare) {
            backFromCompare.addEventListener('click', function() {
                console.log("Back from comparison clicked");
                if (compareDetails) compareDetails.style.display = 'none';
                if (compareSelection) compareSelection.style.display = 'block';
            });
        }
        
        // Инициализация
        console.log("Application initialized");
    });
    </script>
</body>
</html>
